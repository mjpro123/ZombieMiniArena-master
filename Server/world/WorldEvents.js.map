{"version":3,"sources":["world/WorldEvents.js","../src/ts/world/WorldEvents.ts"],"names":["Object","defineProperty","exports","value","WorldEvents","Player_1","require","EntityType_1","PacketType_1","Utils_1","EntityUtils_1","DieReason_1","bufferReader_1","Box_1","EntityUtils_2","ItemIds_1","Logger_1","static","controller","handshake","tokenScore","gameServer","id","playerPool","nextId","player","Player","token","token_id","radius","gameConfiguration","entities","hitbox_size","max_speed","speed_forest_default","speed","pos","worldSpawner","findFirstLocation","x","y","players","set","initLivingEntity","initOwner","gameProfile","name","abstractType","EntityAbstractType","LIVING","initEntityData","EntityType","PLAYERS","sendJSON","ServerPacketTypeJson","Handshake","Utils","backInHandshake","ServerDescription","broadcastJSON","NewPlayer","playerId","skin","accessory","baglook","book","box","deadBox","kills","bag","inventory","getBag","Loggers","game","info","userIp","playersArray","values","push","score","broadcastBinary","Buffer","from","ServerPacketTypeBinary","VerifiedAccount","LeaderboardUpdate","entity","writer","BufferWriter","writeUInt8","TeamIsDestroyed","i","data","length","sendBinary","toBuffer","totemFactory","lastTotemCooldown","performance","now","owner","type","loot","entityPool","Box","CRATE","getBoxSkin","onSpawn","angle","setLoot","ownerClass","ExcludeTeam","filter","e","worldDeleter","initEntity","delete","addBox","DEAD_BOX","toArray","session_id","tokenManager","leaveToken","KillPlayer","DieReason","PLAYER_KILLED","closeSocket","leaderboard","writeLb","Math","floor","days","ItemIds","SUPER_HAMMER","DRAGON_HEART","SWORD_WOOD","SWORD","SWORD_GOLD","SWORD_DIAMOND","SWORD_AMETHYST","REIDITE_SWORD","DRAGON_SWORD","LAVA_SWORD","PIRATE_SWORD","SPEAR","WOOD_SPEAR","GOLD_SPEAR","DIAMOND_SPEAR","AMETHYST_SPEAR","REIDITE_SPEAR","DRAGON_SPEAR","LAVA_SPEAR","CRAB_SPEAR","WOOD_BOW","STONE_BOW","GOLD_BOW","DIAMOND_BOW","AMETHYST_BOW","REIDITE_BOW","DRAGON_BOW","WOOD_SHIELD","STONE_SHIELD","GOLD_SHIELD","DIAMOND_SHIELD","AMETHYST_SHIELD","REIDITE_SHIELD","WAND1","WAND2","PICK_WOOD","PICK","PICK_GOLD","PICK_DIAMOND","PICK_AMETHYST","PICK_REIDITE","SPANNER","PITCHFORK","PITCHFORK2","forEach","removeItem","countItem","ghost","health","gaugesManager","healthUpdate","hat","right","updateInfo","publ","setTimeout","resdid","isBuilding","TREASURE_CHEST","_entity","getEntity","toDrop","drop","item","count"],"mappings":"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","file":"WorldEvents.js","sourceRoot":"../"}